!function(a){function b(a){var c,d,e,f=this;if("string"==typeof a){var g=a.split(":");c=parseInt(g[0],10),d=parseInt(g[1],10),e=parseInt(g[2],10)}else c=a.getHours(),d=a.getMinutes(),e=a.getSeconds();f.hh=function(){return c},f.mm=function(){return d},f.ss=function(){return e},f.totalSeconds=function(){return 3600*c+60*d+e},f.eq=function(a){return f.totalSeconds()==a.totalSeconds()},f.g=function(a){return f.totalSeconds()>a.totalSeconds()},f.l=function(a){return f.totalSeconds()<a.totalSeconds()},f.le=function(a){return f.totalSeconds()<=a.totalSeconds()},f.ge=function(a){return f.totalSeconds()>=a.totalSeconds()},f.inPeriod=function(a,c){if(c.l(a)){var d=f.inPeriod(a,new b("24:00:00")),e=f.inPeriod(new b("00:00:00"),c);return d||e}return f.g(a)&&f.le(c)}}function c(a,b){this.tagsSettings=a,this.defaultValue=b}c.prototype._parsePeriod=function(a){function b(a,b){var c=b.split("-"),d=new Date(a,parseInt(c[0],10)-1,c[1]);return d}var c=(new Date).getFullYear(),d=b(c,a.from),e=b(c,a.to);return e.setTime(e.getTime()+86399e3),d>e&&e.setFullYear(c+1),{from:d,to:e}},c.prototype.getAllForDate=function(a){for(var c=[],d=0;d<this.tagsSettings.length;d++){var e=this.tagsSettings[d],f=this._parsePeriod(e.period);if(a>f.from&&a<f.to){var g=new b(a),h=new b(e.daily.from),i=new b(e.daily.to);g.inPeriod(h,i)&&c.push(e)}}return c.sort(function(a,b){return a.order-b.order})},c.prototype.getForDate=function(a,b){arguments.length<2&&(b=this.defaultValue);var c=this.getAllForDate(a);return c.length?c[0]:b||null},c.prototype.getActive=function(a){return 0===arguments.length&&(a=this.defaultValue),this.getForDate(new Date,a)},"undefined"!=typeof module&&module.exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):a.TimetableTags=c}(this);